\hypertarget{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler}{}\doxysection{Open\+Accessibility\+Py.\+Audio.\+Audio\+Resampler Class Reference}
\label{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler}\index{OpenAccessibilityPy.Audio.AudioResampler@{OpenAccessibilityPy.Audio.AudioResampler}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler_a91fcdfa019d75cd080ef86a0254bead4}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, int target\+\_\+sample\+\_\+rate=16000)
\item 
def \mbox{\hyperlink{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler_adf2d5700a04f24c0d77d776ae534f665}{\+\_\+\+\_\+del\+\_\+\+\_\+}} (self)
\item 
np.\+ndarray \mbox{\hyperlink{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler_a9d99b19346cebb0f6b5827a5f01bf48b}{resample}} (self, np.\+ndarray audio\+\_\+data, int buffer\+\_\+sample\+\_\+rate=48000, int buffer\+\_\+num\+\_\+channels=2)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Audio Resampler for Resampling Incoming Audio to the Target Sample Rate. Using FFmpeg for Resampling.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{Audio_8py_source_l00015}{15}} of file \mbox{\hyperlink{Audio_8py_source}{Audio.\+py}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler_a91fcdfa019d75cd080ef86a0254bead4}\label{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler_a91fcdfa019d75cd080ef86a0254bead4}} 
\index{OpenAccessibilityPy.Audio.AudioResampler@{OpenAccessibilityPy.Audio.AudioResampler}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!OpenAccessibilityPy.Audio.AudioResampler@{OpenAccessibilityPy.Audio.AudioResampler}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def Open\+Accessibility\+Py.\+Audio.\+Audio\+Resampler.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{int }]{target\+\_\+sample\+\_\+rate = {\ttfamily 16000} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Constructor of Audio Resampler Class

Args:
    target_sample_rate (int, optional): The Target for all incoming resampling requests. Defaults to 16000 (Required by Whisper).
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{Audio_8py_source_l00018}{18}} of file \mbox{\hyperlink{Audio_8py_source}{Audio.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00018     \textcolor{keyword}{def }\_\_init\_\_(self, target\_sample\_rate: int = 16000):}
\DoxyCodeLine{00019         \textcolor{stringliteral}{"{}"{}"{}Constructor of Audio Resampler Class}}
\DoxyCodeLine{00020 \textcolor{stringliteral}{}}
\DoxyCodeLine{00021 \textcolor{stringliteral}{        Args:}}
\DoxyCodeLine{00022 \textcolor{stringliteral}{            target\_sample\_rate (int, optional): The Target }\textcolor{keywordflow}{for} all incoming resampling requests. Defaults to 16000 (Required by Whisper).}
\DoxyCodeLine{00023         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00024 \textcolor{stringliteral}{}}
\DoxyCodeLine{00025 \textcolor{stringliteral}{        self.\_audio\_resampler = av.AudioResampler(}}
\DoxyCodeLine{00026 \textcolor{stringliteral}{            format="{}s16"{}}, layout=\textcolor{stringliteral}{"{}mono"{}}, rate=target\_sample\_rate}
\DoxyCodeLine{00027         )}
\DoxyCodeLine{00028         self.\_resample\_mutex = Lock()}
\DoxyCodeLine{00029 }

\end{DoxyCode}
\mbox{\Hypertarget{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler_adf2d5700a04f24c0d77d776ae534f665}\label{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler_adf2d5700a04f24c0d77d776ae534f665}} 
\index{OpenAccessibilityPy.Audio.AudioResampler@{OpenAccessibilityPy.Audio.AudioResampler}!\_\_del\_\_@{\_\_del\_\_}}
\index{\_\_del\_\_@{\_\_del\_\_}!OpenAccessibilityPy.Audio.AudioResampler@{OpenAccessibilityPy.Audio.AudioResampler}}
\doxysubsubsection{\texorpdfstring{\_\_del\_\_()}{\_\_del\_\_()}}
{\footnotesize\ttfamily def Open\+Accessibility\+Py.\+Audio.\+Audio\+Resampler.\+\_\+\+\_\+del\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Destructor of Audio Resampler Class.

Ensures PyAV Resampler Object is Properly Deleted, calling Garbage Collection in the process.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{Audio_8py_source_l00030}{30}} of file \mbox{\hyperlink{Audio_8py_source}{Audio.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00030     \textcolor{keyword}{def }\_\_del\_\_(self):}
\DoxyCodeLine{00031         \textcolor{stringliteral}{"{}"{}"{}Destructor of Audio Resampler Class.}}
\DoxyCodeLine{00032 \textcolor{stringliteral}{}}
\DoxyCodeLine{00033 \textcolor{stringliteral}{        Ensures PyAV Resampler Object }\textcolor{keywordflow}{is} Properly Deleted, calling Garbage Collection \textcolor{keywordflow}{in} the process.}
\DoxyCodeLine{00034         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00035 \textcolor{stringliteral}{}}
\DoxyCodeLine{00036 \textcolor{stringliteral}{        }\textcolor{comment}{\# Try Deleting the resampler object to cleanly free up memory}}
\DoxyCodeLine{00037         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00038             del self.\_audio\_resampler}
\DoxyCodeLine{00039         \textcolor{keywordflow}{except}:}
\DoxyCodeLine{00040             \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00041 }
\DoxyCodeLine{00042         \textcolor{keywordflow}{try}:  \textcolor{comment}{\# Delete the mutex}}
\DoxyCodeLine{00043             del self.\_resample\_mutex}
\DoxyCodeLine{00044         \textcolor{keywordflow}{except}:}
\DoxyCodeLine{00045             \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047         \textcolor{comment}{\# Force Garbage Collection, due to resampler not being properly deleted otherwise.}}
\DoxyCodeLine{00048         gc.collect()}
\DoxyCodeLine{00049 }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler_a9d99b19346cebb0f6b5827a5f01bf48b}\label{classOpenAccessibilityPy_1_1Audio_1_1AudioResampler_a9d99b19346cebb0f6b5827a5f01bf48b}} 
\index{OpenAccessibilityPy.Audio.AudioResampler@{OpenAccessibilityPy.Audio.AudioResampler}!resample@{resample}}
\index{resample@{resample}!OpenAccessibilityPy.Audio.AudioResampler@{OpenAccessibilityPy.Audio.AudioResampler}}
\doxysubsubsection{\texorpdfstring{resample()}{resample()}}
{\footnotesize\ttfamily  np.\+ndarray Open\+Accessibility\+Py.\+Audio.\+Audio\+Resampler.\+resample (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{np.\+ndarray}]{audio\+\_\+data,  }\item[{int }]{buffer\+\_\+sample\+\_\+rate = {\ttfamily 48000},  }\item[{int }]{buffer\+\_\+num\+\_\+channels = {\ttfamily 2} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Resamples the Incoming Audio Data to the Classes Assigned Target Sample Rate.

Args:
    audio_data (np.ndarray): Audio Data to Resample.
    buffer_sample_rate (int, optional): Sample Rate of the Incoming Audio Data. Defaults to 48000.
    buffer_num_channels (int, optional): Number of Channels in the Incoming Audio Data. Defaults to 2 (Stereo).

Returns:
    np.ndarray: Resampled Version of the Incoming Audio Data.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{Audio_8py_source_l00050}{50}} of file \mbox{\hyperlink{Audio_8py_source}{Audio.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00055     ) -\/> np.ndarray:}
\DoxyCodeLine{00056         \textcolor{stringliteral}{"{}"{}"{}Resamples the Incoming Audio Data to the Classes Assigned Target Sample Rate.}}
\DoxyCodeLine{00057 \textcolor{stringliteral}{}}
\DoxyCodeLine{00058 \textcolor{stringliteral}{        Args:}}
\DoxyCodeLine{00059 \textcolor{stringliteral}{            audio\_data (np.ndarray): Audio Data to Resample.}}
\DoxyCodeLine{00060 \textcolor{stringliteral}{            buffer\_sample\_rate (int, optional): Sample Rate of the Incoming Audio Data. Defaults to 48000.}}
\DoxyCodeLine{00061 \textcolor{stringliteral}{            buffer\_num\_channels (int, optional): Number of Channels }\textcolor{keywordflow}{in} the Incoming Audio Data. Defaults to 2 (Stereo).}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063         Returns:}
\DoxyCodeLine{00064             np.ndarray: Resampled Version of the Incoming Audio Data.}
\DoxyCodeLine{00065         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00066 \textcolor{stringliteral}{}}
\DoxyCodeLine{00067 \textcolor{stringliteral}{        audio\_data = self.\_convert\_to\_s16(audio\_data).reshape(-\/1, 1)}}
\DoxyCodeLine{00068 \textcolor{stringliteral}{}}
\DoxyCodeLine{00069 \textcolor{stringliteral}{        frame: av.AudioFrame = av.AudioFrame.from\_ndarray(}}
\DoxyCodeLine{00070 \textcolor{stringliteral}{            audio\_data.T,}}
\DoxyCodeLine{00071 \textcolor{stringliteral}{            format="{}s16"{}},}
\DoxyCodeLine{00072             layout=\textcolor{stringliteral}{"{}stereo"{}} \textcolor{keywordflow}{if} buffer\_num\_channels == 2 \textcolor{keywordflow}{else} \textcolor{stringliteral}{"{}mono"{}},}
\DoxyCodeLine{00073         )}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075         frame.sample\_rate = buffer\_sample\_rate}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077         resampled\_frames: list[av.AudioFrame] = []}
\DoxyCodeLine{00078         \textcolor{keyword}{with} self.\_resample\_mutex:}
\DoxyCodeLine{00079             resampled\_frames = self.\_audio\_resampler.resample(frame)}
\DoxyCodeLine{00080 }
\DoxyCodeLine{00081         \textcolor{keywordflow}{return} self.\_convert\_to\_float32(resampled\_frames[0].to\_ndarray()).reshape(}
\DoxyCodeLine{00082             -\/1,}
\DoxyCodeLine{00083         )}
\DoxyCodeLine{00084 }

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
Content/\+Python/\+Open\+Accessibility\+Py/Audio.\+py\end{DoxyCompactItemize}
